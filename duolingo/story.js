!async function() {
  if(!window.jQuery){
      let script = document.createElement('script');
      document.head.appendChild(script);
      script.type = 'text/javascript';
      script.src = "//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js";
      await (function() {
        return new Promise((resolve, reject) => {
          var interval = setInterval(function() {
            if(!window.jQuery)
              return;
            clearInterval(interval);
            resolve();
          }, 100);
        });
      })();
      
      window.console = new Proxy(window.console, 
                        {
                          get(obj, prop) {
                            return (...params) => {
                              window.w && window.w.console[prop](...params);
                              obj[prop](...params);
                            }
                          }
                        });
  }
  
  var $ = window.$;

  if(false) {
    if(!window.w || window.w.closed)
      window.w = window.open("", "", "width=200,height=100");
  }

  function waitForLogs() {
    return new Promise((resolve, reject) => {
      var originalconsole = window.console;
      window.console = new Proxy(window.console, 
                        {
                          get(obj, prop) {
                            return (...params) => {
                              try{ 
                                if(params[0].match(/^story JSON/)) {
                                  window.console = originalconsole;
                                  originalconsole[prop](...params);
                                  resolve(JSON.parse(params[0].replaceAll(/^[^{]+/g,'')));
                                }
                              }catch(e){}
                            }
                          }
                        });
      
    })
  }

  function waitFor(selector, millis) {
    millis = millis || 200 + Math.random()*1000;
    return new Promise((resolve, reject) => {
                  var interval = setInterval(function() { 
                      if(!$(selector).length)
                        return console.debug("waitFor still waiting for", selector);
                        
                      clearInterval(interval);
                      resolve($(selector));
                    }, millis);
    });
  }

  async function processHistory() {
    console.info("processHistory START");
    var config = {"elements":[{"type":"HEADER","illustrationUrl":"https://stories-cdn.duolingo.com/image/0d966d1c1fc9e1a264ed728fa96b2ddeda797038.svg","title":"The Pudding Tastes Strange","learningLanguageTitleContent":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":300,"rangeEnd":12},{"audioStart":920,"rangeEnd":21},{"audioStart":1400,"rangeEnd":28}],"url":"https://stories-cdn.duolingo.com/audio/9778794baef269b2457eec387e37b06e42688f68.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":10},{"hintIndex":2,"rangeFrom":12,"rangeTo":19},{"hintIndex":3,"rangeFrom":21,"rangeTo":27}],"hints":["the","pudding","tastes","strange"],"text":"Der Pudding schmeckt komisch"},"trackingProperties":{}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"PROSE","content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":5},{"audioStart":450,"rangeEnd":10},{"audioStart":800,"rangeEnd":17},{"audioStart":1790,"rangeEnd":21},{"audioStart":1980,"rangeEnd":24},{"audioStart":2100,"rangeEnd":27},{"audioStart":2280,"rangeEnd":39},{"audioStart":2820,"rangeEnd":48},{"audioStart":3340,"rangeEnd":52}],"url":"https://stories-cdn.duolingo.com/audio/0b491e16a88a4e32303e0cfaf672d9896da9667d.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":3},{"hintIndex":1,"rangeFrom":5,"rangeTo":8},{"hintIndex":2,"rangeFrom":10,"rangeTo":14},{"hintIndex":3,"rangeFrom":17,"rangeTo":19},{"hintIndex":4,"rangeFrom":21,"rangeTo":50}],"hints":["Eddy","eats","something","that","he found in the fridge"],"text":"Eddy isst etwas, das er im Kühlschrank gefunden hat."}},"trackingProperties":{"line_index":1}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":8},{"audioStart":1080,"rangeEnd":15},{"audioStart":1520,"rangeEnd":23},{"audioStart":2030,"rangeEnd":28},{"audioStart":2230,"rangeEnd":37},{"audioStart":2930,"rangeEnd":46},{"audioStart":3650,"rangeEnd":54}],"url":"https://stories-cdn.duolingo.com/audio/ea7aaea4cad1ae638a20f406f3dabc06f6fce67e.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":5},{"hintIndex":1,"rangeFrom":8,"rangeTo":13},{"hintIndex":2,"rangeFrom":15,"rangeTo":21},{"hintIndex":3,"rangeFrom":23,"rangeTo":26},{"hintIndex":4,"rangeFrom":28,"rangeTo":35},{"hintIndex":5,"rangeFrom":37,"rangeTo":44},{"hintIndex":6,"rangeFrom":46,"rangeTo":52}],"hints":["Junior","this","pudding","here","tastes","fairly","strange"],"text":"Junior? Dieser Pudding hier schmeckt ziemlich komisch."}},"trackingProperties":{"line_index":2}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":9},{"audioStart":1180,"rangeEnd":17},{"audioStart":1590,"rangeEnd":25}],"url":"https://stories-cdn.duolingo.com/audio/406fd4448def6c5f2825854d64ac98d754b6518e.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":6},{"hintIndex":1,"rangeFrom":9,"rangeTo":15},{"hintIndex":2,"rangeFrom":17,"rangeTo":23}],"hints":["pudding","what","pudding"],"text":"Pudding? Welcher Pudding?"}},"trackingProperties":{"line_index":3}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":220,"rangeEnd":12},{"audioStart":560,"rangeEnd":16},{"audioStart":760,"rangeEnd":24},{"audioStart":1230,"rangeEnd":36}],"url":"https://stories-cdn.duolingo.com/audio/1010c0125f8efd0c6936472f40f681ba984eafb9.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":10},{"hintIndex":2,"rangeFrom":12,"rangeTo":14},{"hintIndex":3,"rangeFrom":16,"rangeTo":22},{"hintIndex":4,"rangeFrom":24,"rangeTo":34}],"hints":["the","pudding","from","our","fridge"],"text":"Der Pudding aus unserem Kühlschrank."}},"trackingProperties":{"line_index":4}},{"type":"CHALLENGE_PROMPT","prompt":{"hintMap":[],"hints":[],"text":"Select the missing phrase"},"trackingProperties":{"line_index":5,"challenge_type":"select-phrases"}},{"type":"LINE","hideRangesForChallenge":[{"start":0,"end":20}],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":280,"rangeEnd":8},{"audioStart":590,"rangeEnd":13},{"audioStart":850,"rangeEnd":22},{"audioStart":1420,"rangeEnd":26},{"audioStart":1590,"rangeEnd":30},{"audioStart":1760,"rangeEnd":35},{"audioStart":3050,"rangeEnd":55}],"url":"https://stories-cdn.duolingo.com/audio/8b5ce6adac9a2e5f9e5d7d91bade0b7de501fa79.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":19},{"hintIndex":1,"rangeFrom":22,"rangeTo":24},{"hintIndex":2,"rangeFrom":26,"rangeTo":28},{"hintIndex":3,"rangeFrom":30,"rangeTo":33},{"hintIndex":4,"rangeFrom":35,"rangeTo":53}],"hints":["that wasn't a pudding","that","was","my","biology experiment"],"text":"Das war kein Pudding, das war mein Biologie-Experiment."}},"trackingProperties":{"line_index":5}},{"type":"SELECT_PHRASE","answers":["Da war mein Pudel","Das war kein Pullover","Das war kein Pudding"],"correctAnswerIndex":2,"trackingProperties":{"line_index":5,"challenge_type":"select-phrases"}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":3},{"audioStart":320,"rangeEnd":9},{"audioStart":760,"rangeEnd":13},{"audioStart":1090,"rangeEnd":20},{"audioStart":1650,"rangeEnd":28}],"url":"https://stories-cdn.duolingo.com/audio/6bc9cc08d5230bd56e5c37f79c3f8a359d41f5e3.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":1},{"hintIndex":1,"rangeFrom":3,"rangeTo":7},{"hintIndex":2,"rangeFrom":9,"rangeTo":23}],"hints":["it","had","green fur"],"text":"Es hatte ein grünes Fell ..."}},"trackingProperties":{"line_index":6}},{"type":"CHALLENGE_PROMPT","prompt":{"hintMap":[],"hints":[],"text":"What comes next?"},"trackingProperties":{"line_index":7,"challenge_type":"continuation"}},{"type":"LINE","hideRangesForChallenge":[{"start":19,"end":33}],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":300,"rangeEnd":10},{"audioStart":880,"rangeEnd":16},{"audioStart":1230,"rangeEnd":19},{"audioStart":1550,"rangeEnd":22},{"audioStart":1790,"rangeEnd":34}],"url":"https://stories-cdn.duolingo.com/audio/e6377ee38068e8b22bdd9888fb2131b6e20a5a58.mp3"},"audioPrefix":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":300,"rangeEnd":10},{"audioStart":880,"rangeEnd":16},{"audioStart":1230,"rangeEnd":19},{"audioStart":1550,"rangeEnd":22},{"audioStart":1790,"rangeEnd":34}],"url":"https://stories-cdn.duolingo.com/audio/0676e428255e8fa2bb8c6f4e565a252eff60747c.mp3"},"audioSuffix":{"keypoints":[{"audioStart":0,"rangeEnd":22},{"audioStart":240,"rangeEnd":34}],"url":"https://stories-cdn.duolingo.com/audio/21e84087e17892386d7a3fb4592782e574681b0d.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":8},{"hintIndex":2,"rangeFrom":10,"rangeTo":17},{"hintIndex":3,"rangeFrom":19,"rangeTo":32}],"hints":["how","long","has it been sitting","in the fridge"],"text":"Wie lange stand es im Kühlschrank?"}},"trackingProperties":{"line_index":7}},{"type":"MULTIPLE_CHOICE","answers":[{"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":9},{"hintIndex":2,"rangeFrom":11,"rangeTo":14}],"hints":["on","my","head"],"text":"auf meinem Kopf"},{"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":4},{"hintIndex":1,"rangeFrom":6,"rangeTo":8},{"hintIndex":2,"rangeFrom":10,"rangeTo":13}],"hints":["under","the","bed"],"text":"unter dem Bett"},{"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":1},{"hintIndex":1,"rangeFrom":3,"rangeTo":13}],"hints":["in the","fridge"],"text":"im Kühlschrank"}],"correctAnswerIndex":2,"trackingProperties":{"line_index":7,"challenge_type":"continuation"}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":5},{"audioStart":380,"rangeEnd":14}],"url":"https://stories-cdn.duolingo.com/audio/fe5cc51c2335e4a31dd277cfcddcc88ec9f14897.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":3},{"hintIndex":1,"rangeFrom":5,"rangeTo":12}],"hints":["since","November"],"text":"Seit November."}},"trackingProperties":{"line_index":8}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":330,"rangeEnd":10},{"audioStart":660,"rangeEnd":15}],"url":"https://stories-cdn.duolingo.com/audio/504bc2a3beefab7c54090966e531dc8630ab3333.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":8},{"hintIndex":1,"rangeFrom":10,"rangeTo":13}],"hints":["it's","March"],"text":"Wir haben März."}},"trackingProperties":{"line_index":9}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":270,"rangeEnd":12},{"audioStart":890,"rangeEnd":16},{"audioStart":1190,"rangeEnd":22},{"audioStart":1590,"rangeEnd":28}],"url":"https://stories-cdn.duolingo.com/audio/7ae65e81519620b37094a2ce25f4c70fd4daf4e7.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":9},{"hintIndex":2,"rangeFrom":12,"rangeTo":14},{"hintIndex":3,"rangeFrom":16,"rangeTo":20},{"hintIndex":4,"rangeFrom":22,"rangeTo":26}],"hints":["I","think","I","am getting","sick"],"text":"Ich glaube, ich werde krank."}},"trackingProperties":{"line_index":10}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":330,"rangeEnd":11},{"audioStart":810,"rangeEnd":14},{"audioStart":970,"rangeEnd":19}],"url":"https://stories-cdn.duolingo.com/audio/3baa2f88e3aca9875d83fba0f8111335b5c1e556.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":17}],"hints":["how","are you feeling"],"text":"Wie fühlst du dich?"}},"trackingProperties":{"line_index":11}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":270,"rangeEnd":9},{"audioStart":810,"rangeEnd":27}],"url":"https://stories-cdn.duolingo.com/audio/cdc70a5b40d27fe38f00f2a555686189d8c75888.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":22}],"hints":["my stomach hurts"],"text":"Ich habe Bauchschmerzen ..."}},"trackingProperties":{"line_index":12}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":1810,"rangeEnd":8},{"audioStart":2130,"rangeEnd":11},{"audioStart":2370,"rangeEnd":16},{"audioStart":2870,"rangeEnd":21},{"audioStart":3050,"rangeEnd":25},{"audioStart":3220,"rangeEnd":29},{"audioStart":3390,"rangeEnd":34},{"audioStart":3650,"rangeEnd":38},{"audioStart":3870,"rangeEnd":42},{"audioStart":4080,"rangeEnd":48},{"audioStart":4450,"rangeEnd":55}],"url":"https://stories-cdn.duolingo.com/audio/e0284d734823466ad4b889166e8627baaada3af4.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":1},{"hintIndex":1,"rangeFrom":4,"rangeTo":13},{"hintIndex":2,"rangeFrom":16,"rangeTo":19},{"hintIndex":3,"rangeFrom":21,"rangeTo":23},{"hintIndex":4,"rangeFrom":25,"rangeTo":27},{"hintIndex":5,"rangeFrom":29,"rangeTo":32},{"hintIndex":6,"rangeFrom":34,"rangeTo":46},{"hintIndex":7,"rangeFrom":48,"rangeTo":53}],"hints":["hm","does it hurt","when","I","you","here","on the belly","press"],"text":"Hm. Tut es weh, wenn ich dir hier auf den Bauch drücke?"}},"trackingProperties":{"line_index":13}},{"type":"POINT_TO_PHRASE","correctAnswerIndex":3,"transcriptParts":[{"selectable":false,"text":"Hm"},{"selectable":false,"text":". "},{"selectable":false,"text":"Tut"},{"selectable":false,"text":" "},{"selectable":false,"text":"es"},{"selectable":false,"text":" "},{"selectable":false,"text":"weh"},{"selectable":false,"text":", "},{"selectable":true,"text":"wenn"},{"selectable":false,"text":" "},{"selectable":true,"text":"ich"},{"selectable":false,"text":" "},{"selectable":false,"text":"dir"},{"selectable":false,"text":" "},{"selectable":true,"text":"hier"},{"selectable":false,"text":" "},{"selectable":false,"text":"auf"},{"selectable":false,"text":" "},{"selectable":false,"text":"den"},{"selectable":false,"text":" "},{"selectable":false,"text":"Bauch"},{"selectable":false,"text":" "},{"selectable":true,"text":"drücke"},{"selectable":false,"text":"?"}],"question":{"hintMap":[],"hints":[],"text":"Choose the option that means \"press.\""},"trackingProperties":{"line_index":13,"challenge_type":"point-to-phrase"}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":5}],"url":"https://stories-cdn.duolingo.com/audio/f02a6558e5ec848297a1e30f57caf649c910e8d4.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":3}],"hints":["no"],"text":"Nein."}},"trackingProperties":{"line_index":14}},{"type":"CHALLENGE_PROMPT","prompt":{"hintMap":[],"hints":[],"text":"Tap what you hear"},"trackingProperties":{"line_index":15,"challenge_type":"arrange"}},{"type":"LINE","hideRangesForChallenge":[{"start":0,"end":25}],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":1070,"rangeEnd":9},{"audioStart":1290,"rangeEnd":13},{"audioStart":1440,"rangeEnd":18},{"audioStart":1790,"rangeEnd":25}],"url":"https://stories-cdn.duolingo.com/audio/811b33e09b92d6f2d0e6f758793492575503e12c.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":7},{"hintIndex":2,"rangeFrom":9,"rangeTo":11},{"hintIndex":3,"rangeFrom":13,"rangeTo":23}],"hints":["and","when","I","press here"],"text":"Und wenn ich hier drücke?"}},"trackingProperties":{"line_index":15}},{"type":"ARRANGE","characterPositions":[4,9,13,25],"phraseOrder":[3,2,0,1],"selectablePhrases":["ich","hier drücke","wenn","Und"],"trackingProperties":{"line_index":15,"challenge_type":"arrange"}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4}],"url":"https://stories-cdn.duolingo.com/audio/35426ed8c7dd16aa86c8880e42bd830c4e494cc5.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2}],"hints":["ouch"],"text":"Aua!"}},"trackingProperties":{"line_index":16}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":15}],"url":"https://stories-cdn.duolingo.com/audio/d01c0d0f09637ae17c4feceac75dbe3e7addb4b0.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":10}],"hints":["interesting"],"text":"Interessant ..."}},"trackingProperties":{"line_index":17}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":310,"rangeEnd":8},{"audioStart":470,"rangeEnd":12},{"audioStart":630,"rangeEnd":19},{"audioStart":980,"rangeEnd":24}],"url":"https://stories-cdn.duolingo.com/audio/5476560b3119f4a0408f82621e503f582d954ce2.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":10},{"hintIndex":1,"rangeFrom":12,"rangeTo":17},{"hintIndex":2,"rangeFrom":19,"rangeTo":22}],"hints":["how about","your","head"],"text":"Was ist mit deinem Kopf?"}},"trackingProperties":{"line_index":18}},{"type":"CHALLENGE_PROMPT","prompt":{"hintMap":[],"hints":[],"text":"What comes next?"},"trackingProperties":{"line_index":19,"challenge_type":"continuation"}},{"type":"LINE","hideRangesForChallenge":[{"start":31,"end":46}],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":400,"rangeEnd":8},{"audioStart":640,"rangeEnd":22},{"audioStart":1660,"rangeEnd":27},{"audioStart":1900,"rangeEnd":31},{"audioStart":2580,"rangeEnd":35},{"audioStart":3000,"rangeEnd":47}],"url":"https://stories-cdn.duolingo.com/audio/268f62b9bb5f550c86404f9742195ff0ae9b4da0.mp3"},"audioPrefix":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":400,"rangeEnd":8},{"audioStart":640,"rangeEnd":22},{"audioStart":1660,"rangeEnd":27},{"audioStart":1900,"rangeEnd":31},{"audioStart":2580,"rangeEnd":35},{"audioStart":3000,"rangeEnd":47}],"url":"https://stories-cdn.duolingo.com/audio/227721286f44490e630469db9eaa4be73b013eeb.mp3"},"audioSuffix":{"keypoints":[{"audioStart":0,"rangeEnd":35},{"audioStart":420,"rangeEnd":47}],"url":"https://stories-cdn.duolingo.com/audio/80ce72f547b6f27d950214c89db095e0bd4e83b2.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":6},{"hintIndex":1,"rangeFrom":8,"rangeTo":18},{"hintIndex":2,"rangeFrom":22,"rangeTo":29},{"hintIndex":3,"rangeFrom":31,"rangeTo":45}],"hints":["I am","dizzy","do I have to (go)","to hospital"],"text":"Mir ist schwindelig … Muss ich ins Krankenhaus?"}},"trackingProperties":{"line_index":19}},{"type":"MULTIPLE_CHOICE","answers":[{"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":14}],"hints":["to the","hospital"],"text":"ins Krankenhaus"},{"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":16}],"hints":["eat candy"],"text":"Süßigkeiten essen"},{"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":1},{"hintIndex":1,"rangeFrom":3,"rangeTo":5},{"hintIndex":2,"rangeFrom":7,"rangeTo":15}],"hints":["into","the","bathtub"],"text":"in die Badewanne"}],"correctAnswerIndex":0,"trackingProperties":{"line_index":19,"challenge_type":"continuation"}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":12},{"audioStart":1240,"rangeEnd":16},{"audioStart":1380,"rangeEnd":20},{"audioStart":1550,"rangeEnd":27},{"audioStart":1870,"rangeEnd":30},{"audioStart":1980,"rangeEnd":35},{"audioStart":2170,"rangeEnd":41}],"url":"https://stories-cdn.duolingo.com/audio/01541607602a6c9d60d0bf47f8ef76f655699588.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":9},{"hintIndex":1,"rangeFrom":12,"rangeTo":14},{"hintIndex":2,"rangeFrom":16,"rangeTo":18},{"hintIndex":3,"rangeFrom":20,"rangeTo":33},{"hintIndex":4,"rangeFrom":35,"rangeTo":39}],"hints":["maybe","and","how","are you feeling","otherwise"],"text":"Vielleicht. Und wie fühlst du dich sonst?"}},"trackingProperties":{"line_index":20}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":5},{"audioStart":340,"rangeEnd":10},{"audioStart":640,"rangeEnd":14},{"audioStart":1070,"rangeEnd":23},{"audioStart":2090,"rangeEnd":29},{"audioStart":2520,"rangeEnd":33},{"audioStart":2730,"rangeEnd":36},{"audioStart":2830,"rangeEnd":44},{"audioStart":4020,"rangeEnd":50},{"audioStart":4470,"rangeEnd":54},{"audioStart":4640,"rangeEnd":57},{"audioStart":4710,"rangeEnd":64},{"audioStart":4940,"rangeEnd":72}],"url":"https://stories-cdn.duolingo.com/audio/03d1eaa34f55f8932e2889f62c49d41a1200e0fb.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":3},{"hintIndex":1,"rangeFrom":5,"rangeTo":8},{"hintIndex":2,"rangeFrom":10,"rangeTo":12},{"hintIndex":3,"rangeFrom":14,"rangeTo":20},{"hintIndex":4,"rangeFrom":23,"rangeTo":27},{"hintIndex":5,"rangeFrom":29,"rangeTo":34},{"hintIndex":6,"rangeFrom":36,"rangeTo":41},{"hintIndex":7,"rangeFrom":44,"rangeTo":48},{"hintIndex":8,"rangeFrom":50,"rangeTo":55},{"hintIndex":9,"rangeFrom":57,"rangeTo":70}],"hints":["my","mouth","is","dry","now","it is","wet","now","it is","dry again"],"text":"Mein Mund ist trocken. Jetzt ist er feucht. Jetzt ist er wieder trocken!"}},"trackingProperties":{"line_index":21}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":5},{"audioStart":430,"rangeEnd":9},{"audioStart":810,"rangeEnd":14},{"audioStart":1170,"rangeEnd":18}],"url":"https://stories-cdn.duolingo.com/audio/a8478960f5f823b0eaf074ac02197adeb9fc62b9.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":16}],"hints":["do I look blue"],"text":"Sehe ich blau aus?"}},"trackingProperties":{"line_index":22}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":710,"rangeEnd":9}],"url":"https://stories-cdn.duolingo.com/audio/a837882755db9f2c85083835156c208b2dc1d5d0.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":1}],"hints":["yes"],"text":"Ja! Cool!"}},"trackingProperties":{"line_index":23}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":290,"rangeEnd":12},{"audioStart":880,"rangeEnd":16},{"audioStart":1050,"rangeEnd":24},{"audioStart":2080,"rangeEnd":28},{"audioStart":2340,"rangeEnd":33},{"audioStart":2650,"rangeEnd":37},{"audioStart":2950,"rangeEnd":42}],"url":"https://stories-cdn.duolingo.com/audio/4e26d7bbb2464aae9b960cd063e29c3d24e7faef.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":9},{"hintIndex":2,"rangeFrom":12,"rangeTo":21},{"hintIndex":3,"rangeFrom":24,"rangeTo":31},{"hintIndex":4,"rangeFrom":33,"rangeTo":40}],"hints":["I","think","I'm dying","I'm going","to bed"],"text":"Ich glaube, ich sterbe. Ich gehe ins Bett."}},"trackingProperties":{"line_index":24}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":7},{"audioStart":780,"rangeEnd":11},{"audioStart":910,"rangeEnd":16},{"audioStart":1180,"rangeEnd":22},{"audioStart":1530,"rangeEnd":25},{"audioStart":1610,"rangeEnd":30},{"audioStart":1770,"rangeEnd":35},{"audioStart":2060,"rangeEnd":45}],"url":"https://stories-cdn.duolingo.com/audio/4d6a46557c9a6767bb39f404413cd61f7caf4ab3.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":4},{"hintIndex":1,"rangeFrom":7,"rangeTo":9},{"hintIndex":2,"rangeFrom":11,"rangeTo":14},{"hintIndex":3,"rangeFrom":16,"rangeTo":20},{"hintIndex":4,"rangeFrom":22,"rangeTo":23},{"hintIndex":5,"rangeFrom":25,"rangeTo":28},{"hintIndex":6,"rangeFrom":30,"rangeTo":33},{"hintIndex":7,"rangeFrom":35,"rangeTo":43}],"hints":["wait","I","have to","everything","in","my","notebook","write down"],"text":"Warte! Ich muss alles in mein Heft schreiben!"}},"trackingProperties":{"line_index":25}},{"type":"POINT_TO_PHRASE","correctAnswerIndex":3,"transcriptParts":[{"selectable":true,"text":"Warte"},{"selectable":false,"text":"! "},{"selectable":false,"text":"Ich"},{"selectable":false,"text":" "},{"selectable":true,"text":"muss"},{"selectable":false,"text":" "},{"selectable":false,"text":"alles"},{"selectable":false,"text":" "},{"selectable":false,"text":"in"},{"selectable":false,"text":" "},{"selectable":true,"text":"mein"},{"selectable":false,"text":" "},{"selectable":true,"text":"Heft"},{"selectable":false,"text":" "},{"selectable":false,"text":"schreiben"},{"selectable":false,"text":"!"}],"question":{"hintMap":[],"hints":[],"text":"Choose the option that means \"notebook.\""},"trackingProperties":{"line_index":25,"challenge_type":"point-to-phrase"}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/627af6feb184ba55e9e06e545d379e22609acf7c.svg","characterId":414,"characterNameMap":{"it":"Eddy","de":"Eddy","pt":"Eddy","ko":"에디","ja":"エディ","fr":"Eddy","es":"Eddy","en":"Eddy"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":4},{"audioStart":380,"rangeEnd":8},{"audioStart":630,"rangeEnd":13}],"url":"https://stories-cdn.duolingo.com/audio/53144a2c586a5dc94f2520fa01aae9491827b549.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":2},{"hintIndex":1,"rangeFrom":4,"rangeTo":6},{"hintIndex":2,"rangeFrom":8,"rangeTo":11}],"hints":["for","the","doctor"],"text":"Für den Arzt?"}},"trackingProperties":{"line_index":26}},{"type":"LINE","hideRangesForChallenge":[],"line":{"type":"CHARACTER","avatarUrl":"https://stories-cdn.duolingo.com/image/739efe62722704dde5c6d173f7e142bdcff23d67.svg","characterId":415,"characterNameMap":{"pt":"Júnior","ko":"주니어","fr":"Junior","it":"Junior","ja":"ジュニア","es":"Junior","en":"Junior","de":"Junior"},"content":{"audio":{"keypoints":[{"audioStart":0,"rangeEnd":6},{"audioStart":1120,"rangeEnd":10},{"audioStart":1330,"rangeEnd":17},{"audioStart":1770,"rangeEnd":25},{"audioStart":2900,"rangeEnd":28},{"audioStart":3220,"rangeEnd":33},{"audioStart":3470,"rangeEnd":38},{"audioStart":3740,"rangeEnd":64}],"url":"https://stories-cdn.duolingo.com/audio/2c7adc5901a7294c033aa880c21cce7b7d99d7de.mp3"},"hintMap":[{"hintIndex":0,"rangeFrom":0,"rangeTo":3},{"hintIndex":1,"rangeFrom":6,"rangeTo":8},{"hintIndex":2,"rangeFrom":10,"rangeTo":15},{"hintIndex":3,"rangeFrom":17,"rangeTo":22},{"hintIndex":4,"rangeFrom":25,"rangeTo":26},{"hintIndex":5,"rangeFrom":28,"rangeTo":31},{"hintIndex":6,"rangeFrom":33,"rangeTo":36},{"hintIndex":7,"rangeFrom":38,"rangeTo":42},{"hintIndex":8,"rangeFrom":44,"rangeTo":62}],"hints":["no","for","my","teacher","you","are","my","new","biology experiment"],"text":"Nein. Für meinen Lehrer. Du bist mein neues Biologie-Experiment!"}},"trackingProperties":{"line_index":27}},{"type":"MULTIPLE_CHOICE","answers":[{"hintMap":[],"hints":[],"text":"He got sick after eating Junior's old biology experiment."},{"hintMap":[],"hints":[],"text":"His skin turned blue in the shower."},{"hintMap":[],"hints":[],"text":"He sat in the fridge for several months."}],"correctAnswerIndex":0,"question":{"hintMap":[],"hints":[],"text":"How did Eddy become Junior's new biology experiment?"},"trackingProperties":{"line_index":27,"challenge_type":"multiple-choice"}},{"type":"MATCH","fallbackHints":[{"phrase":"muss","translation":"have to"},{"phrase":"neues","translation":"new"},{"phrase":"Muss ich","translation":"do I have to"},{"phrase":"Interessant","translation":"interesting"},{"phrase":"Kühlschrank","translation":"fridge","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/890b6e58be41dc6aa76abd36175ed602"}],"matches":[{"phrase":"Pudding","translation":"custard","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/9db7d7d188cfabf2e90887be96215f14"},{"phrase":"gefunden","translation":"found","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/6eaebbb02b6512aabe4cc6ef27258f05"},{"phrase":"Kühlschrank","translation":"fridge","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/890b6e58be41dc6aa76abd36175ed602"},{"phrase":"Biologie-Experiment","translation":"biology experiment","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/2da70b6d4ddc7baf81893beb429cec54"},{"phrase":"grünes Fell","translation":"green fur","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/7788e09ce93640848b86312a72708a55"},{"phrase":"März","translation":"March","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/8b23ed7bec2e8620e766ce5c036482e0"},{"phrase":"seit","translation":"since","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/2b91a5890a039808b24ab46b69a7e7a3"},{"phrase":"Bauchschmerzen","translation":"stomach ache","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/4f5b7d0d78a5082357973a8c04632461"},{"phrase":"trocken","translation":"dry","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/c510cae9c4d62f15082ffee336beb07f"},{"phrase":"feucht","translation":"wet","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/a4d50bb373688cef7e1058657ad4f7e8"},{"phrase":"Arzt","translation":"doctor","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/c01c6983def811aca8fc0a6dcad7102d"},{"phrase":"Heft","translation":"notebook","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/19951702a50bf1e6fb6fd48ec2ab910c"},{"phrase":"blau","translation":"blue","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/23ae823d0199b6e870857d3936e04e9b"},{"phrase":"Kopf","translation":"head","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/4deb98345d1340a92a8c012c6a4cd9ac"},{"phrase":"Krankenhaus","translation":"hospital","phraseTtsUrl":"https://d1vq87e9lcf771.cloudfront.net/mila/eb9fe31259f35a10768488394c62ee0a"}],"prompt":"Tap the pairs","trackingProperties":{"line_index":28,"challenge_type":"match"}}],"learningLanguage":"de","fromLanguage":"en","revision":38,"startTime":1674397906,"illustrations":{"active":"https://stories-cdn.duolingo.com/image/0d966d1c1fc9e1a264ed728fa96b2ddeda797038.svg","gilded":"https://stories-cdn.duolingo.com/image/f25e514ad1818ab864c40d579bddeaec3347b6cb.svg","locked":"https://stories-cdn.duolingo.com/image/d82ef2e7bd225b287d7f4d357a42c3714b91d913.svg"},"listenModeCharacterIds":[414],"speakModeCharacterIds":[415],"cefrLevel":"A2.1","baseXp":20,"mode":"READ","isListenModeAvailable":false,"isListenModeRequired":false,"fromLanguageName":"The Pudding Tastes Strange","unspeakableWords":[],"showPromptsInTargetLanguage":false,"trackingProperties":{"adaptive_difficulty_level":9,"stories_creation_date_epoch":1627836489,"stories_seconds_since_creation":46561417,"first_story":false,"already_completed":true,"story_play_mode":"read","total_stories_completed":187,"completed_story_count":187,"story_max_level":4,"story_set_index":23,"has_writing":false,"story_id":"de-en-der-pudding-schmeckt-komisch","story_revision":38,"story_language":"de","cefr_level":"A2.1","multipart":false,"story_type":"radio-play","story_subtype":"radio-play","session_cefr_level_section":"A2.1","session_cefr_level":"A2"},"trackingConstants":{"maxTimePerLine":30,"maxTimePerChallenge":60}}
    window.config = config = await waitForLogs();

    for(var i = window.index || 0; i < config.elements.length; ++i, window.index = i) {
        var elem = window.elem = config.elements[i];
        console.log(i, elem);
        switch(elem.type) {
          case "CHALLENGE_PROMPT":
            break;
          case 'HEADER': 
            var btn = await waitFor("button[data-test=story-start]:not(:disabled),button[data-test=stories-player-continue]:not(:disabled)");
            
            if(btn.text() != 'Continue')
              btn.click();
            
            break;
          case 'LINE':
            var btn = await waitFor("button[data-test=stories-player-continue]:not(:disabled)");
            btn.click();
            console.debug(elem.line.content.text);
            break;
          case "SELECT_PHRASE":
            var btn = await waitFor("button[data-test=stories-choice]:contains(" + elem.answers[elem.correctAnswerIndex] + "):visible");
            btn.click();
            break;
          case "MULTIPLE_CHOICE":
            while(true) {
              // for some reason this step puts a confirmation button there...!
              var btn = await waitFor("li:contains(" + elem.answers[elem.correctAnswerIndex].text + ") button:visible,button[data-test=stories-player-continue]:not(:disabled)");
              btn.click();
              
              if(!btn.is("[data-test=stories-player-continue]"))
                break;
            }
            
            break;
          case "POINT_TO_PHRASE":
            var btn2 = await waitFor("button[data-test=stories-player-continue]:not(:disabled)");
            btn2.click();
            
            var text = elem.transcriptParts.filter((e) => e.selectable)[elem.correctAnswerIndex].text;
            var btn = await waitFor("button span[data-test=challenge-tap-token-text]:contains(" + text + ")");
            btn.click();
            break;
          case "ARRANGE":
            for(var idx = 0; idx < elem.phraseOrder.length; ++idx) {
              var text = elem.selectablePhrases[elem.phraseOrder[idx]];
              var btn = await waitFor("span[data-test=challenge-tap-token-text]:contains(" + text + ")");
              btn.click();
            }
            break;
          case "MATCH":
            var btn2 = await waitFor("button[data-test=stories-player-continue]:not(:disabled)");
            btn2.click();
            
            await waitFor("[data-test=challenge-tap-token-text]:eq(9)");
            var btns = $("[data-test=challenge-tap-token-text]");
            for(var idx = 0; idx < elem.matches.length; ++idx) {
              var phrase = elem.matches[idx].phrase;
              var translation = elem.matches[idx].translation;
              
              let btn = btns.filter((i, o) => [phrase, translation].indexOf($(o).text()) >= 0);
              if(btn.length == 2) {
                await waitFor("[data-test=challenge-tap-token-text]", 500);
                btn.click();
              } 
            }
            break;
        }
    }
    
    while(true) {
      var btn = await waitFor("button[data-test=stories-player-continue]:not(:disabled):visible,button[data-test=stories-player-done]:visible");
      btn.click();
      
      if(btn.is("[data-test=stories-player-done]"))
        break;
    }
    
    console.info("processHistory END");
  }

  while(true) {
    var bnt;
    btn = await waitFor("img[src*=5367427ba2aa472b8cc5ddb13ebabf2c]:visible:first", Math.random() * 5000);
    btn.click();
    
    btn = await waitFor("a[data-test^=skill-path-state-passed]:visible", 100);
    btn[0].click();

    delete window.index;
    await processHistory();
  }
}();
